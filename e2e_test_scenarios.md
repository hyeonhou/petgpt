# PetGPT E2E 테스트 시나리오

이 문서는 PetGPT 챗봇의 End-to-End 테스트 시나리오를 정의합니다.

## 1. Q&A 시나리오

### 시나리오 1.1: 기본 반려동물 지식 질문

**설명**: 사용자가 반려동물 관련 일반 지식에 대한 질문을 합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "강아지가 초콜릿을 먹으면 위험한 이유는 무엇인가요?"
3. 응답 확인

**기대 결과**:

- 응답 타입: `qna`
- 정확한 정보 제공 (초콜릿의 테오브로민이 개에게 독성 물질임을 설명)
- 출처 표시 여부 확인
- 의학 정보임을 고지하는 경고 메시지 표시

### 시나리오 1.2: 반려동물 케어 관련 질문

**설명**: 사용자가 반려동물 관리에 관한 정보를 요청합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "고양이 털 관리는 어떻게 해야 하나요?"
3. 응답 확인

**기대 결과**:

- 응답 타입: `qna`
- 고양이 털 관리에 관한 정확한 정보 제공 (빗질 빈도, 도구 등)
- 출처 표시 여부 확인

## 2. 상품 추천 시나리오

### 시나리오 2.1: 일반 상품 추천 요청

**설명**: 사용자가 특정 반려동물을 위한 상품 추천을 요청합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "강아지 장난감 추천해주세요"
3. 응답 확인

**기대 결과**:

- 응답 타입: `product_recommendation`
- 1-3개의 관련 상품 추천
- 각 상품에 대한 설명, 가격, 이미지 URL 등의 정보 포함
- 상품 바로가기 링크 확인

### 시나리오 2.2: 특정 조건의 상품 추천 요청

**설명**: 사용자가 구체적인 조건(반려동물 나이, 크기, 특성 등)을 명시하여 상품 추천을 요청합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "대형견 노견용 관절에 좋은 사료 추천해주세요"
3. 응답 확인

**기대 결과**:

- 응답 타입: `product_recommendation`
- 요청 조건(대형견, 노령, 관절 건강)에 맞는 사료 추천
- 각 상품에 대한 설명, 가격, 이미지 URL 등의 정보 포함
- 상품 바로가기 링크 확인

## 3. 의료 조언 회피 시나리오

### 시나리오 3.1: 의료 관련 질문 처리

**설명**: 사용자가 반려동물 건강 문제에 대한 질문을 합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "강아지가 구토를 계속하는데 어떻게 해야 하나요?"
3. 응답 확인

**기대 결과**:

- 응답에 전문가 상담 권유 메시지 포함 (의료 경고 문구)
- 일반적인 정보는 제공하되, 진단이나 치료법 제시는 회피
- `medical_warning` 플래그가 true로 설정됨

## 4. 예외 케이스 및 경계값 테스트

### 시나리오 4.1: 반려동물과 관련 없는 질문 처리

**설명**: 사용자가 반려동물과 관련 없는 일반 질문을 합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "오늘 날씨 어때요?" 또는 "주식 시장 전망이 어떻게 될까요?"
3. 응답 확인

**기대 결과**:

- 응답 타입: `general`
- 반려동물 관련 질문을 요청하는 안내 메시지
- 직접적인 답변 회피

### 시나리오 4.2: 매우 짧거나 불명확한 질문 처리

**설명**: 사용자가 매우 짧거나 불명확한 질문을 합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "강아지?" 또는 "고양이 먹이"와 같은 불완전한 문장 입력
3. 응답 확인

**기대 결과**:

- 보다 구체적인 질문을 요청하는 안내 메시지
- 가능한 의도를 추측하여 관련 정보 제공 시도

### 시나리오 4.3: 한국어/영어 혼용 질문 처리

**설명**: 사용자가 한국어와 영어가 혼합된 질문을 합니다.

**테스트 단계**:

1. 챗봇 모달 열기
2. 입력: "What is the best food for 강아지?"
3. 응답 확인

**기대 결과**:

- 질문을 올바르게 이해하고 적절한 한국어 응답 제공
- 필요시 번역 옵션 표시

## 5. UI/UX 테스트

### 시나리오 5.1: 챗봇 모달 동작 테스트

**설명**: 챗봇 모달의 기본 기능을 테스트합니다.

**테스트 단계**:

1. 챗봇 버튼 클릭하여 모달 열기
2. 모달 최소화/최대화 기능 확인
3. 모달 닫기 버튼으로 창 닫기
4. 다양한 화면 크기(데스크톱, 태블릿, 모바일)에서 반응형 동작 확인

**기대 결과**:

- 모달이 부드럽게 열리고 닫힘
- 다양한 화면 크기에서 적절히 조정됨
- 채팅 내역이 유지됨

### 시나리오 5.2: 대화 흐름 테스트

**설명**: 연속적인 대화 흐름을 테스트합니다.

**테스트 단계**:

1. 챗봇에 초기 질문 입력: "강아지 사료 추천해주세요"
2. 응답 확인 후 후속 질문 입력: "그 중에서 가장 인기 있는 것은?"
3. 응답 확인 후 다른 주제로 전환: "고양이 장난감은 어떤 것이 있나요?"

**기대 결과**:

- 각 질문에 적절한 응답 제공
- 대화 맥락 유지 여부 확인
- 주제 전환을 자연스럽게 처리

## 테스트 수행 방법

각 시나리오는 다음의 환경에서 테스트해야 합니다:

1. 개발 환경 (localhost)
2. 스테이징 환경 (테스트 서버)
3. 프로덕션 환경 (실제 서비스 환경)

모든 테스트 결과는 다음 정보를 포함하여 기록해야 합니다:

- 테스트 일시
- 테스트 환경
- 테스트 결과 (성공/실패)
- 실패 시 오류 내용 및 스크린샷
- 응답 시간 (성능 측정)

## 성능 기준

- API 응답 시간: 5초 이내
- 모달 열기/닫기 시간: 1초 이내
- 대화 내역 스크롤 동작: 부드럽게 작동
